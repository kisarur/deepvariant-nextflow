singularity {
    enabled = true
    autoMounts = true
}

process {
    executor = 'pbspro'
    project = params.nci_project
    storage = params.nci_storage
    module = 'singularity'
    beforeScript = 'module load singularity'
    container = params.container_path

    withName: MAKE_EXAMPLES {
        queue = 'normal'
        cpus = 48
        memory = '192.GB'
        time = '30.min'
        disk = '10GB'
        ext.args = params.make_examples_args
    }

    withName: CALL_VARIANTS {
        queue = 'gpuvolta'
        cpus = 12
        gpus = 1
        memory = '96.GB'
        time = '30.min'
        disk = '10GB'
        ext.args = params.call_variants_args
    }

    withName: POSTPROCESS_VARIANTS_AND_VCF_STATS_REPORT {
        queue = 'normal'
        cpus = 4
        memory = '16.GB'
        time = '10.min'
        disk = '10GB'
    }
}